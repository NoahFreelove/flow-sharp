Note: Flow Standard Library
Note: This file defines all built-in functions as internal procedures
Note: The C# implementations are linked at runtime

use "@collections"
use "@bars"

internal proc print (String: s)

internal proc len (Voids: arr)
internal proc len(String: s)

Note: str overloads for all types
internal proc str (Int: value)
internal proc str (Float: value)
internal proc str (Double: value)
internal proc str (String: value)
internal proc str (Bool: value)
internal proc str (Note: value)
internal proc str (Bar: value)
internal proc str (Semitone: value)
internal proc str (Cent: value)
internal proc str (Millisecond: value)
internal proc str (Second: value)
internal proc str (Decibel: value)
internal proc str (Voids: value)
internal proc str (Sequence: value)
internal proc str (Chord: value)
internal proc str (Section: value)
internal proc str (Song: value)

internal proc concat (String: a, String: b)

Note: Type conversions
internal proc intToDouble (Int: value)
internal proc doubleToInt (Double: value)

internal proc add (Int: a, Int: b)
internal proc add (Float: a, Float: b)
internal proc add (Double: a, Double: b)

internal proc sub (Int: a, Int: b)
internal proc sub (Double: a, Double: b)

internal proc mul (Int: a, Int: b)
internal proc mul (Double: a, Double: b)

internal proc div (Int: a, Int: b)
internal proc div (Double: a, Double: b)

Note: String-to-number conversions
internal proc stringToInt (String: s)
internal proc stringToDouble (String: s)

Note: Lazy evaluation
internal proc eval (Lazy<Void>: value)

internal proc if (Bool: cond, Lazy<Void>: if_true, Lazy<Void>: otherwise)
internal proc and (Lazy<Bool>: left, Lazy<Bool>: right)
internal proc and (Bool: left, Bool: right)

internal proc or (Lazy<Bool>: left, Lazy<Bool>: right)
internal proc or (Bool: left, Bool: right)

Note: Equality and comparison operators
internal proc equals (Void: a, Void: b)
internal proc sequals (Void: a, Void: b)
internal proc lt (Void: a, Void: b)
internal proc gt (Void: a, Void: b)
internal proc lte (Void: a, Void: b)
internal proc gte (Void: a, Void: b)

internal proc ?()
internal proc ??()
internal proc ??reset()
internal proc ??set(Int: seed)

Note: Pattern transforms
internal proc transpose (Sequence: seq, Semitone: interval)
internal proc transpose (Sequence: seq, Cent: interval)
internal proc invert (Sequence: seq)
internal proc retrograde (Sequence: seq)
internal proc augment (Sequence: seq)
internal proc diminish (Sequence: seq)
internal proc up (Sequence: seq, Int: octaves)
internal proc down (Sequence: seq, Int: octaves)
internal proc repeat (Sequence: seq, Int: times)
internal proc repeat (Sequence: seq, Int: times, Semitone: interval)
internal proc concat (Sequence: a, Sequence: b)

Note: Dynamic transforms
internal proc crescendo (Sequence: seq, Double: startVel, Double: endVel)
internal proc decrescendo (Sequence: seq, Double: startVel, Double: endVel)
internal proc swell (Sequence: seq, Double: edgeVel, Double: peakVel)

Note: Harmony and chord functions
internal proc chordNotes (Chord: c)
internal proc chordRoot (Chord: c)
internal proc chordQuality (Chord: c)
internal proc arpeggio (Chord: c, String: direction)
internal proc scaleNotes (String: keyName)
internal proc resolveNumeral (String: numeral, String: keyName)
internal proc getSections (Song: s)
internal proc sectionSequences (Section: s)

Note: Generative features
internal proc euclidean (Int: hits, Int: steps, Note: pitch)
